/*
 * Test some basic parser features.
 */
static
func1()
{
    return _func_;
}

if (func1() != func1)
    fail("_func_ not set correctly");
if (func1.autos._func_ != func1)
    fail("func.auto incorrect");
if (func1.name != "func1")
    fail("func.name incorrect");


static x = [array #abc#];
if (x[0] != #abc#)
    fail("const regexp incorrectly parsed");
    
    
static
method(this, arg1)
{
	return this.value + arg1;
}

static c = struct();

c.method :=
[func(this, arg1)
	{
		return this.value + arg1;
	}
];

static o = struct(c, "value", 2);

if (o@method(3) != 5)
	fail("object@method() returned incorrect value");

error := NULL;
try
	parse("a syntax error");
onerror
	;
if (error == NULL)
	fail("didn't propogate parse error correctly");
	